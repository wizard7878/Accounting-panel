{% load static %}
<html lang="en-US" dir="rtl" class="chrome windows fontawesome-i2svg-active fontawesome-i2svg-complete">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- ===============================================-->
  <!--    Document Title-->
  <!-- ===============================================-->
  <title>Phoenix</title>

  <!-- ===============================================-->
  <!--    Favicons-->
  <!-- ===============================================-->
  

  <meta name="theme-color" content="#ffffff">
  <script src="{% static 'vendors/imagesloaded/imagesloaded.pkgd.min.js' %}"></script>
  <script src="{% static 'vendors/simplebar/simplebar.min.js' %}"></script>
  <script src="{% static 'assets/js/config.js' %}"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""> 
  <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;600;700;800;900&amp;display=swap" rel="stylesheet">
  <link href="{% static 'vendors/simplebar/simplebar.min.css' %}" rel="stylesheet">
  <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.8/css/line.css">
  <link href="{% static 'assets/css/theme-rtl.min.css' %}" type="text/css" rel="stylesheet" id="style-rtl">
  <link href="{% static 'assets/css/theme.min.css' %}" type="text/css" rel="stylesheet" id="style-default" disabled="true">
  <link href="{% static 'assets/css/user-rtl.min.css' %}" type="text/css" rel="stylesheet" id="user-style-rtl">
  <link href="{% static 'assets/css/user.min.css' %}" type="text/css" rel="stylesheet" id="user-style-default" disabled="true">
  <link rel="stylesheet" type="text/css" id="mce-u0" href="{% static 'vendors/tinymce/skins/ui/oxide/skin.min.css'%}">
  <!-- ===============================================-->
  <!--    Stylesheets-->
  <!-- ===============================================-->
 
  {% include '_partials/_styles-assets.html ' %}
  <script>
    var phoenixIsRTL = window.config.config.phoenixIsRTL;
    if (phoenixIsRTL) {
      var linkDefault = document.getElementById('style-default');
      var userLinkDefault = document.getElementById('user-style-default');
      linkDefault.setAttribute('disabled', true);
      userLinkDefault.setAttribute('disabled', true);
      document.querySelector('html').setAttribute('dir', 'rtl');
    } else {
      var linkRTL = document.getElementById('style-rtl');
      var userLinkRTL = document.getElementById('user-style-rtl');
      linkRTL.setAttribute('disabled', true);
      userLinkRTL.setAttribute('disabled', true);
    }
  </script>
<link rel="stylesheet" type="text/css" id="mce-u0" href="{% static 'vendors/tinymce/skins/ui/oxide/skin.min.css' %}">
</head>

<body>
  <!-- ===============================================-->
  <!--    Main Content-->
  <!-- ===============================================-->
  <main class="main" id="top">
    {% include "_partials/navbar-menu.html" %}
    

  
    <div class="content">
      
    
      <div class="position-fixed w-100 z-index-5 mx-n4 mx-lg-n6 bg-white border-bottom border-300" style="top: 65px">
        <nav class="simplebar-scrollspy navbar py-0 scrollbar-overlay" id="widgets-scrollspy" data-simplebar="init"><div class="simplebar-wrapper" style="margin: 0px -24px;"><div class="simplebar-height-auto-observer-wrapper"><div class="simplebar-height-auto-observer"></div></div><div class="simplebar-mask"><div class="simplebar-offset" style="left: 0px; bottom: 0px;"><div class="simplebar-content-wrapper" tabindex="0" role="region" aria-label="scrollable content" style="height: auto; overflow: hidden;"><div class="simplebar-content" style="padding: 0px 24px;">
          <ul class="nav">
            <li class="nav-item"> <a class="test nav-link text-700 fw-bold py-3 lh-1 text-nowrap" href="#customers">لیست مشتریان</a></li>
            <!-- <li class="nav-item"> <a class="test nav-link text-700 fw-bold py-3 lh-1 text-nowrap" href="#members-grami">لیست حساب های گرمی</a></li> -->
            <!-- <li class="nav-item"> <a class="test nav-link text-700 fw-bold py-3 lh-1 text-nowrap active" href="#members-boland-modat">لیست حساب های بلند مدت</a></li> -->
          </ul>
        </div></div></div></div><div class="simplebar-placeholder" style="width: 1010px; height: 49px;"></div></div><div class="simplebar-track simplebar-horizontal" style="visibility: hidden;"><div class="simplebar-scrollbar" style="width: 0px; display: none;"></div></div><div class="simplebar-track simplebar-vertical" style="visibility: hidden;"><div class="simplebar-scrollbar" style="height: 0px; display: none;"></div></div></nav>
      </div>
      <div class="mb-9" data-bs-spy="scroll" data-bs-target="#widgets-scrollspy">
        <div class="mx-n4 px-4 mx-lg-n6 px-lg-6 bg-white pt-6 pb-3 mt-6">
          <div class="row">
            <div class="col-12 col-xl-7 col-xxl-6">
              {% for message in messages %}
                {% if message.tags == 'error' %}
                  <div class="alert alert-soft-danger alert-dismissible fade show w-50" role="alert">
                    <p>{{message}}</p>
                    <button class="btn-close" type="button" data-bs-dismiss="alert" aria-label="Close"></button>
                  </div>
                  {% else %}

                  <div class="alert alert-soft-success alert-dismissible fade show w-50" role="alert">
                    <p>{{message}}</p>
                    <button class="btn-close" type="button" data-bs-dismiss="alert" aria-label="Close"></button>
                  </div>
                  {% endif %}
          {% endfor %}
              <div class="row g-3 mb-3">
                <div class="col-12 col-md-6">
                  <h3 class="text-1100 text-nowrap">نسیه</h3>
                  <p class="text-700 mb-md-7">تمامی حساب های نیسه اعم از ریالی ، گرمی ، بلند مدت</p>
                  <div class="d-flex align-items-center justify-content-between">
                    <p class="mb-0 fw-bold">نوع حساب </p>
                    <p class="mb-0 fs--5">تمامی حساب ها <span class="fw-bold">{{pieChartInfo.total}}</span></p>
                  </div>
                  <hr class="bg-200 mb-2 mt-2">
                  
                  <div class="d-flex align-items-center mb-1"><span class="d-inline-block bg-info-300 bullet-item me-2"></span>
                    <p class="mb-0 fw-semi-bold text-900 lh-sm flex-1">حساب گرمی</p>
                    <h5 class="mb-0 text-900">{{pieChartInfo.G}}</h5>
                  </div>
                  <div class="d-flex align-items-center mb-1"><span class="d-inline-block bg-warning-300 bullet-item me-2"></span>
                    <p class="mb-0 fw-semi-bold text-900 lh-sm flex-1">حساب های ریالی</p>
                    <h5 class="mb-0 text-900">{{pieChartInfo.R}}</h5>
                  </div>
                  <div class="d-flex align-items-center mb-1"><span class="d-inline-block bg-danger-300 bullet-item me-2"></span>
                    <p class="mb-0 fw-semi-bold text-900 lh-sm flex-1">حساب های بلند مدت</p>
                    <h5 class="mb-0 text-900">{{pieChartInfo.L}}</h5>
                  </div>
               
               
                </div>
                <div class="col-12 col-md-6">
                  <div class="position-relative mb-sm-4 mb-xl-0">
                    <div class="echart-issue-chart" style="min-height: 390px; width: 100%; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); position: relative;" _echarts_instance_="ec_1717862113122"><div style="position: relative; width: 330px; height: 390px; padding: 0px; margin: 0px; border-width: 0px; cursor: default;"><canvas data-zr-dom-id="zr_0" width="412" height="487" style="position: absolute; left: 0px; top: 0px; width: 330px; height: 390px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); padding: 0px; margin: 0px; border-width: 0px;"></canvas></div><div class="" style="position: absolute; display: block; border-style: solid; white-space: nowrap; z-index: 9999999; box-shadow: rgba(0, 0, 0, 0.2) 1px 2px 10px; transition: opacity 0.2s cubic-bezier(0.23, 1, 0.32, 1) 0s, visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1) 0s, transform 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s; background-color: rgb(255, 255, 255); border-width: 1px; border-radius: 4px; color: rgb(102, 102, 102); font: 14px / 21px &quot;Microsoft YaHei&quot;; padding: 10px; top: 0px; left: 0px; transform: translate3d(110px, 267px, 0px); border-color: rgb(96, 198, 255); pointer-events: none; visibility: hidden; opacity: 0;"><div style="margin: 0px 0 0;line-height:1;"><div style="font-size:14px;color:#666;font-weight:400;line-height:1;">انواع حساب ها</div><div style="margin: 10px 0 0;line-height:1;"><div style="margin: 0px 0 0;line-height:1;"><span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:#60c6ff;"></span><span style="font-size:14px;color:#666;font-weight:400;margin-left:2px">حساب های ریالی</span><span style="float:right;margin-left:20px;font-size:14px;color:#666;font-weight:900">3</span><div style="clear:both"></div></div><div style="clear:both"></div></div><div style="clear:both"></div></div></div></div>
                  </div>
                </div>
              </div>
            </div>
            
          </div>
        </div>
        
        
        <div id="customers" class="pt-3"> 
          {% for error in createCustomerForm.phone_number.errors %}
          <div class="alert alert-soft-danger alert-dismissible fade show w-50" role="alert">
            <p>{{error}}</p>
            <button class="btn-close" type="button" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
          {% endfor %}  
          <h2 class="text-bold text-1100 mb-5">تمام مشتریان</h2>
          <div data-list="{&quot;valueNames&quot;:[&quot;customer&quot;,&quot;email&quot;,&quot;mobile_number&quot;,&quot;city&quot;,&quot;last_active&quot;,&quot;joined&quot;],&quot;page&quot;:10,&quot;pagination&quot;:true}">
            <div class="row align-items-center justify-content-between g-3 mb-4">
              <div class="col col-auto">
                <!--customer Searcher -->
                <div class="search-box">
                  <form method="get" class="position-relative"><input id="search-customer" class="form-control search-input" type="search" placeholder="مشتری رو با شماره همراهش پیدا کن" aria-label="Search">
                    <svg class="svg-inline--fa fa-magnifying-glass search-box-icon" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="magnifying-glass" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M500.3 443.7l-119.7-119.7c27.22-40.41 40.65-90.9 33.46-144.7C401.8 87.79 326.8 13.32 235.2 1.723C99.01-15.51-15.51 99.01 1.724 235.2c11.6 91.64 86.08 166.7 177.6 178.9c53.8 7.189 104.3-6.236 144.7-33.46l119.7 119.7c15.62 15.62 40.95 15.62 56.57 0C515.9 484.7 515.9 459.3 500.3 443.7zM79.1 208c0-70.58 57.42-128 128-128s128 57.42 128 128c0 70.58-57.42 128-128 128S79.1 278.6 79.1 208z"></path></svg><!-- <span class="fas fa-search search-box-icon"></span> Font Awesome fontawesome.com -->
                  </form>
                </div>
                 <!-- end customer Searcher -->
              </div>
       
              <div class="col-auto">
              
                <div class="d-flex align-items-center"><button class="btn btn-primary" type="button" data-bs-toggle="modal" data-bs-target="#rialaccount"><svg class="svg-inline--fa fa-plus me-2" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M432 256c0 17.69-14.33 32.01-32 32.01H256v144c0 17.69-14.33 31.99-32 31.99s-32-14.3-32-31.99v-144H48c-17.67 0-32-14.32-32-32.01s14.33-31.99 32-31.99H192v-144c0-17.69 14.33-32.01 32-32.01s32 14.32 32 32.01v144h144C417.7 224 432 238.3 432 256z"></path></svg><!-- <span class="fas fa-plus me-2"></span> Font Awesome fontawesome.com -->ایجاد حساب برای مشتری</button></div>
                <!--Modal-->
                <div class="modal fade" id="rialaccount" tabindex="-1" aria-labelledby="verticallyCenteredModalLabel" aria-hidden="true">
                  <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="verticallyCenteredModalLabel">ایجاد حساب جدید</h5><button class="btn p-1" type="button" data-bs-dismiss="modal" aria-label="Close"><svg class="svg-inline--fa fa-xmark fs--1" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="xmark" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" data-fa-i2svg=""><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"></path></svg><!-- <span class="fas fa-times fs--1"></span> Font Awesome fontawesome.com --></button>
                      </div>
                      <div class="modal-body">
                        <form class="row g-3" method="post">
                          {% csrf_token %}
                          <div class="col-md-8">
                            <p for="date">شماره همراه</p>
                            <!-- <label >تاریخ</label> -->
                            {{createCustomerForm.phone_number}}
                          </div>
                          
                          
                          
                          
                          </div>
                        <div class="modal-footer"><button  class="btn btn-primary" type="submit">تایید</button><button class="btn btn-outline-primary" type="button" data-bs-dismiss="modal">لغو</button></div>
                        </form>
                    </div>
                  </div>
                </div>
                <!--End Modal-->
              </div>
            </div>
            <div class="mx-n4 mx-lg-n6 px-4 px-lg-6 mb-9 bg-white border-y border-300 mt-2 position-relative top-1">
              <div class="table-responsive scrollbar ms-n1 ps-1">
                <table class="table table-sm fs--5 mb-0">
                   <thead>
                    <tr>
                      
                      <th class="sort align-middle" scope="col" data-sort="customer" style="width:10%; min-width:200px;">نام و نام خانوادگی</th>
                      <th class="sort align-middle" scope="col" data-sort="email" style="width:7%; min-width:200px;">شماره همراه</th>
                      <th class="sort align-middle pe-3" scope="col" data-sort="mobile_number" style="width:30%; min-width:200px;">آدرس</th>
                      <th class="sort align-middle" scope="col" data-sort="city" style="width:4%;">بدهی</th>
                      <th class="sort align-middle text-end" scope="col" data-sort="last_active" style="width:4%;  min-width:180px;">تاریخ</th>
                      <th class="sort align-middle text-end pe-0" scope="col" data-sort="joined" style="width:4%;  min-width:200px;">بستن حساب</th>
                    </tr>
                  </thead>
                  <tbody id ="customer-table">
                    
                  </tbody>
                  
                  <tbody class="list" id="members-table-body">
                    {% if customers %}
                      {% for customer in customers %}
                    <tr id="searchitem" class="hover-actions-trigger btn-reveal-trigger position-static">
                      <td class="customer align-middle white-space-nowrap"><a class="d-flex align-items-center text-900 text-hover-1000" href="#!">
                          <div class="avatar avatar-m">
                            <div class="avatar-name rounded-circle"><span>R</span></div>
                          </div>
                          <h6 class="mb-0 ms-3 fw-semi-bold">{{customer.full_name}}</h6>
                        </a></td>
                      <td class="email align-middle white-space-nowrap"><a href="{% url 'customer' customer.id %}" class="fw-semi-bold ">{{customer.phone_number}}</a></td>
                      <td class="mobile_number align-middle white-space-nowrap"><a class="fw-bold text-1100" href="">{{customer.address}}</a></td>
                      <td class="city align-middle white-space-nowrap text-2000 fw-semi-bold">{% if customer.active_credit %} <span class="badge badge-phoenix badge-phoenix-danger">تسویه نشده</span> {% else %} <span class="badge badge-phoenix badge-phoenix-success">تسویه شده</span> {% endif %}</td>
                      <td class="last_active align-middle text-end white-space-nowrap text-2000 fw-semi-bold">{{customer.joined}}</td>
                      <td class="joined align-middle white-space-nowrap text-2000 text-end fw-semi-bold"><button class="btn btn-danger">حذف</button></td>
                    </tr>
                    {% endfor %}
                    {% endif %}
                  
                  </tbody>

                 
                </table>
              </div>
              <div class="row align-items-center justify-content-between py-2 pe-0 fs--1">
                <div class="col-auto d-flex">
                  <span class="current">
                    صفحه  {{ customers.number }} از {{ customers.paginator.num_pages }}
                  </span>
                </div>
                <div class="col-auto d-flex">
                  {% if customers.has_next %}
                  <a href="?page={{ customers.next_page_number  }}" class="page-link" data-list-pagination="next" disabled=""><svg class="svg-inline--fa fa-chevron-right" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chevron-left" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" data-fa-i2svg=""><path fill="currentColor" d="M96 480c-8.188 0-16.38-3.125-22.62-9.375c-12.5-12.5-12.5-32.75 0-45.25L242.8 256L73.38 86.63c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0l192 192c12.5 12.5 12.5 32.75 0 45.25l-192 192C112.4 476.9 104.2 480 96 480z"></path></svg><!-- <span class="fas fa-chevron-left"></span> Font Awesome fontawesome.com --></a>
                  {% endif %}
                  <!-- <ul class="mb-0 pagination">
                    <li class="active"><button class="page" type="button" data-i="1" data-page="10">1</button></li>
                  </ul> -->

                  
                  {% if customers.has_previous %}
                  <a href="?page={{ customers.previous_page_number }}" class="page-link pe-0" data-list-pagination="prev" disabled=""><svg class="svg-inline--fa fa-chevron-left" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chevron-right" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" data-fa-i2svg=""><path fill="currentColor" d="M224 480c-8.188 0-16.38-3.125-22.62-9.375l-192-192c-12.5-12.5-12.5-32.75 0-45.25l192-192c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25L77.25 256l169.4 169.4c12.5 12.5 12.5 32.75 0 45.25C240.4 476.9 232.2 480 224 480z"></path></svg><!-- <span class="fas fa-chevron-right"></span> Font Awesome fontawesome.com --></a>
                  {% endif %}
                </div>
              </div>
            </div>
          </div>
      
        </div>


 
        
      </div>
      <footer class="footer position-absolute">
        <div class="row g-0 justify-content-between align-items-center h-100">
          <div class="col-12 col-sm-auto text-center">
            <p class="mb-0 mt-2 mt-sm-0 text-900">تهیه شده توسط پیمان شمال زاده 09361586911<span class="d-none d-sm-inline-block"></span><span class="d-none d-sm-inline-block mx-1">|</span><br class="d-sm-none">2024 ©<a class="mx-1" href="https://themewagon.com"></a></p>
          </div>
          <div class="col-12 col-sm-auto text-center">
            <p class="mb-0 text-600">v1.0.0</p>
          </div>
        </div>
      </footer>
    </div>
    
  </main>

  
  <!-- ===============================================-->
  <!--    End of Main Content-->
  <!-- ===============================================-->


<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<script src="{% static 'scripts/customer-searcher.js' %}"></script>
<script src="{% static 'scripts/pie-chart.js' %}"></script>
<script>
  var riali = "{{pieChartInfo.R}}"
  var grami = "{{pieChartInfo.G}}"
  var long = "{{pieChartInfo.L}}"
  pieChart(riali,grami,long)
</script>

</body></html>